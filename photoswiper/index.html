<!doctype html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>PhotoSwipe.js|支持移动手机的纯js图片画廊插件|DEMO_jQuery之家-自由分享jQuery、html5、css3的插件库</title>
	<link rel="stylesheet" type="text/css" href="css/normalize.css" />
	<link rel="stylesheet" type="text/css" href="css/default.css">

	<link rel="stylesheet" href="dist/photoswipe.css"> 
	<link rel="stylesheet" href="dist/default-skin/default-skin.css">

	<link rel="stylesheet" href="css/site.css">
	<!-- Core JS file -->
	<script src="dist/photoswipe.min.js"></script> 

	<!-- UI JS file -->
	<script src="dist/photoswipe-ui-default.min.js"></script> 
	<style type="text/css">
		
	</style>
</head>
<body>
	<article class="htmleaf-container">
		<header class="htmleaf-header">
			<h1>PhotoSwipe.js|支持移动手机的纯js图片画廊插件 <span>A JavaScript image gallery for mobile and desktop</span></h1>
			<div class="htmleaf-links">
				<a class="htmleaf-icon icon-htmleaf-home-outline" href="http://www.htmleaf.com/" title="jQuery之家" target="_blank"><span> jQuery之家</span></a>
				<a class="htmleaf-icon icon-htmleaf-arrow-forward-outline" href="http://www.htmleaf.com/jQuery/Slideshow-Scroller/201511172792.html" title="返回下载页" target="_blank"><span> 返回下载页</span></a>
			</div>
		</header>
		<!--外层展示的结构-->
		<div class="row">

			<div id="demo-test-gallery" class="demo-gallery">
				<a href="img/15008518202_c265dfa55f_h.jpg" data-size="1600x1600" data-med="https://farm4.staticflickr.com/3894/15008518202_b016d7d289_b.jpg" data-med-size="1024x1024" data-author="Folkert Gorter" class="demo-gallery__img--main">
	          		<img src="img/15008518202_b016d7d289_m.jpg" alt="" />
					<!--图片下方的文字展示-->
	          		<figure>This is dummy caption.</figure>
	        	</a>
	        	<a href="img/15008465772_d50c8f0531_h.jpg" data-size="1600x1067" data-med="https://farm4.staticflickr.com/3920/15008465772_383e697089_b.jpg" data-med-size="1024x683" data-author="Thomas Lefebvre">
		          <img src="img/15008465772_383e697089_m.jpg" alt="" />
		          <figure>It's a dummy caption. He who searches for meaning here will be sorely disappointed.</figure>
		        </a>
		        <a href="img/14985868676_b51baa4071_h.jpg" data-size="1600x1067" data-med="https://farm6.staticflickr.com/5584/14985868676_4b802b932a_b.jpg" data-med-size="1024x683" data-author="Michael Hull">
		          <img src="img/14985868676_4b802b932a_m.jpg" alt="" />
		          <figure>Dummy caption. It's Greek to you. Unless, of course, you're Greek, in which case, it really makes no sense.</figure>
		        </a>
		        <a href="img/14985871946_24f47d4b53_h.jpg" data-size="1600x1067" data-med="https://farm4.staticflickr.com/3902/14985871946_86abb8c56f_b.jpg" data-med-size="1024x683" data-author="Ales Krivec">
		          <img src="img/14985871946_86abb8c56f_m.jpg" alt="" />
		          <figure>This is dummy caption. It is not meant to be read.</figure>
		        </a>
		        <a href="img/15008867125_b61960af01_h.jpg" data-size="1600x1068" data-med="https://farm6.staticflickr.com/5591/15008867125_68a8ed88cc_b.jpg" data-med-size="1024x683" data-author="Samuel Rohl">
		          <img src="img/15008867125_68a8ed88cc_m.jpg" alt="" />
		          <figure>This is dummy caption. It has been placed here solely to demonstrate the look and feel of finished, typeset text.</figure>
		        </a>
			</div>

		</div>

		<!-- Root element of PhotoSwipe. Must have class pswp. -->
		<!--PhotoSwipe的根元素。必须要有pswp-->
		<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

		    <!-- Background of PhotoSwipe.
		         It's a separate element, as animating opacity is faster than rgba(). -->
			<!--点击放大图片的背景颜色-->
		    <div class="pswp__bg"></div>

		    <!-- Slides wrapper with overflow:hidden. -->
		    <div class="pswp__scroll-wrap">
		        <!-- Container that holds slides. PhotoSwipe keeps only 3 slides in DOM to save memory. -->
		        <!-- don't modify these 3 pswp__item elements, data is added later on. -->
				<!--放大后的主图显示 -->
		        <div class="pswp__container">
		            <div class="pswp__item"></div>
		            <div class="pswp__item"></div>
		            <div class="pswp__item"></div>
		        </div>

		        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
		        <div class="pswp__ui pswp__ui--hidden">
					<!--各种按钮-->
		            <div class="pswp__top-bar">
		                <!--  Controls are self-explanatory. Order can be changed. -->
						<!--左上角的图片个数展示-->
		                <div class="pswp__counter"></div>
						<!--关闭按钮-->
		                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
						<!--分享按钮-->
		                <button class="pswp__button pswp__button--share" title="Share"></button>
						<!--满屏按钮-->
		                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
						<!--放大镜按钮,移动端默认不展示-->
		                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

		                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
		                <!-- element will get class pswp__preloader--active when preloader is running -->
						<!--预加载的图标展示-->
		                <div class="pswp__preloader">
		                    <div class="pswp__preloader__icn">
		                      <div class="pswp__preloader__cut">
		                        <div class="pswp__preloader__donut"></div>
		                      </div>
		                    </div>
		                </div>
		            </div>
					<!--左右箭头 与分享 展示的下拉框-->
		            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
		                <div class="pswp__share-tooltip"></div>
		            </div>
		            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
		            </button>
		            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
		            </button>
					<!--图片下方的文字展示-->
		            <div class="pswp__caption">
		                <div class="pswp__caption__center"></div>
		            </div>

		          </div>

		        </div>

		</div>





		<footer class="related">
		    <h3>如果你喜欢这个插件，那么你可能也喜欢:</h3>
		    <a href="http://www.htmleaf.com/jQuery/Slideshow-Scroller/201502101359.html">
			  <img src="related/1.jpg" width="300" alt="jQuery和css3响应式带全屏模式的图片画廊插件"/>
			  <h3>jQuery和css3响应式带全屏模式的图片画廊插件</h3>
			</a>
			<a href="http://www.htmleaf.com/jQuery/Lightbox-Dialog/201502071339.html">
			  <img src="related/2.jpg" width="300" alt="jQuery支持移动触摸设备的Lightbox插件"/>
			  <h3>jQuery支持移动触摸设备的Lightbox插件</h3>
			</a>
		</footer>
	</article>
	
	<script type="text/javascript">
		(function() {

		var initPhotoSwipeFromDOM = function(gallerySelector) {

				var parseThumbnailElements = function(el) {
					var thumbElements = el.childNodes,
							numNodes = thumbElements.length,
							items = [],
							el,
							childElements,
							thumbnailEl,
							size,
							item;

					for(var i = 0; i < numNodes; i++) {
						el = thumbElements[i];

						// include only element nodes
						if(el.nodeType !== 1) {
							continue;
						}

						childElements = el.children;

						size = el.getAttribute('data-size').split('x');

						// create slide object
						item = {
							src: el.getAttribute('href'),
							w: parseInt(size[0], 10),
							h: parseInt(size[1], 10),
							author: el.getAttribute('data-author')
						};

						item.el = el; // save link to element for getThumbBoundsFn

						if(childElements.length > 0) {
							item.msrc = childElements[0].getAttribute('src'); // thumbnail url
							if(childElements.length > 1) {
								item.title = childElements[1].innerHTML; // caption (contents of figure)
							}
						}


						var mediumSrc = el.getAttribute('data-med');
						if(mediumSrc) {
							size = el.getAttribute('data-med-size').split('x');
							// "medium-sized" image
							item.m = {
								src: mediumSrc,
								w: parseInt(size[0], 10),
								h: parseInt(size[1], 10)
							};
						}
						// original image
						item.o = {
							src: item.src,
							w: item.w,
							h: item.h
						};

						items.push(item);
					}

					return items;
				};

				// find nearest parent element
				var closest = function closest(el, fn) {
					return el && ( fn(el) ? el : closest(el.parentNode, fn) );
				};

				var onThumbnailsClick = function(e) {
					e = e || window.event;
					e.preventDefault ? e.preventDefault() : e.returnValue = false;

					var eTarget = e.target || e.srcElement;

					var clickedListItem = closest(eTarget, function(el) {
						return el.tagName === 'A';
					});

					if(!clickedListItem) {
						return;
					}

					var clickedGallery = clickedListItem.parentNode;

					var childNodes = clickedListItem.parentNode.childNodes,
							numChildNodes = childNodes.length,
							nodeIndex = 0,
							index;

					for (var i = 0; i < numChildNodes; i++) {
						if(childNodes[i].nodeType !== 1) {
							continue;
						}

						if(childNodes[i] === clickedListItem) {
							index = nodeIndex;
							break;
						}
						nodeIndex++;
					}

					if(index >= 0) {
						openPhotoSwipe( index, clickedGallery );
					}
					return false;
				};

				var photoswipeParseHash = function() {
					var hash = window.location.hash.substring(1),
							params = {};

					if(hash.length < 5) { // pid=1
						return params;
					}

					var vars = hash.split('&');
					for (var i = 0; i < vars.length; i++) {
						if(!vars[i]) {
							continue;
						}
						var pair = vars[i].split('=');
						if(pair.length < 2) {
							continue;
						}
						params[pair[0]] = pair[1];
					}

					if(params.gid) {
						params.gid = parseInt(params.gid, 10);
					}

					return params;
				};

				var openPhotoSwipe = function(index, galleryElement, disableAnimation, fromURL) {
					var pswpElement = document.querySelectorAll('.pswp')[0],
							gallery,
							options,
							items;

					items = parseThumbnailElements(galleryElement);

					// define options (if needed)
					options = {

						galleryUID: galleryElement.getAttribute('data-pswp-uid'),

						getThumbBoundsFn: function(index) {
							// See Options->getThumbBoundsFn section of docs for more info
							var thumbnail = items[index].el.children[0],
									pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
									rect = thumbnail.getBoundingClientRect();

							return {x:rect.left, y:rect.top + pageYScroll, w:rect.width};
						},

						addCaptionHTMLFn: function(item, captionEl, isFake) {
							if(!item.title) {
								captionEl.children[0].innerText = '';
								return false;
							}
							captionEl.children[0].innerHTML = item.title +  '<br/><small>Photo: ' + item.author + '</small>';
							return true;
						}

					};


					if(fromURL) {
						if(options.galleryPIDs) {
							// parse real index when custom PIDs are used
							// http://photoswipe.com/documentation/faq.html#custom-pid-in-url
							for(var j = 0; j < items.length; j++) {
								if(items[j].pid == index) {
									options.index = j;
									break;
								}
							}
						} else {
							options.index = parseInt(index, 10) - 1;
						}
					} else {
						options.index = parseInt(index, 10);
					}

					// exit if index not found
					if( isNaN(options.index) ) {
						return;
					}



					var radios = document.getElementsByName('gallery-style');
					for (var i = 0, length = radios.length; i < length; i++) {
						if (radios[i].checked) {
							if(radios[i].id == 'radio-all-controls') {

							} else if(radios[i].id == 'radio-minimal-black') {
								options.mainClass = 'pswp--minimal--dark';
								options.barsSize = {top:0,bottom:0};
								options.captionEl = false;
								options.fullscreenEl = false;
								options.shareEl = false;
								options.bgOpacity = 0.85;
								options.tapToClose = true;
								options.tapToToggleControls = false;
							}
							break;
						}
					}

					if(disableAnimation) {
						options.showAnimationDuration = 0;
					}

					// Pass data to PhotoSwipe and initialize it
					gallery = new PhotoSwipe( pswpElement, PhotoSwipeUI_Default, items, options);

					// see: http://photoswipe.com/documentation/responsive-images.html
					var realViewportWidth,
							useLargeImages = false,
							firstResize = true,
							imageSrcWillChange;

					gallery.listen('beforeResize', function() {

						var dpiRatio = window.devicePixelRatio ? window.devicePixelRatio : 1;
						dpiRatio = Math.min(dpiRatio, 2.5);
						realViewportWidth = gallery.viewportSize.x * dpiRatio;


						if(realViewportWidth >= 1200 || (!gallery.likelyTouchDevice && realViewportWidth > 800) || screen.width > 1200 ) {
							if(!useLargeImages) {
								useLargeImages = true;
								imageSrcWillChange = true;
							}

						} else {
							if(useLargeImages) {
								useLargeImages = false;
								imageSrcWillChange = true;
							}
						}

						if(imageSrcWillChange && !firstResize) {
							gallery.invalidateCurrItems();
						}

						if(firstResize) {
							firstResize = false;
						}

						imageSrcWillChange = false;

					});

					gallery.listen('gettingData', function(index, item) {
						if( useLargeImages ) {
							item.src = item.o.src;
							item.w = item.o.w;
							item.h = item.o.h;
						} else {
							item.src = item.m.src;
							item.w = item.m.w;
							item.h = item.m.h;
						}
					});

					gallery.init();
				};

				// select all gallery elements
				var galleryElements = document.querySelectorAll( gallerySelector );
				for(var i = 0, l = galleryElements.length; i < l; i++) {
					galleryElements[i].setAttribute('data-pswp-uid', i+1);
					galleryElements[i].onclick = onThumbnailsClick;
				}

				// Parse URL and open gallery if it contains #&pid=3&gid=1
				var hashData = photoswipeParseHash();
				if(hashData.pid && hashData.gid) {
					openPhotoSwipe( hashData.pid,  galleryElements[ hashData.gid - 1 ], true, true );
				}
			};

			initPhotoSwipeFromDOM('.demo-gallery');

	})();
	</script>
</body>
</html>